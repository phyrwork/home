- id: family_room_lamp_mode_bindicator
  alias: Family Room Lamp Mode Bindicator
  trigger:
    - platform: state
      entity_id: input_select.family_room_lamp_mode
      to: bindicator
    - platform: state
      entity_id:
        - sensor.days_to_black_bin_collection
        - sensor.days_to_blue_bin_collection
  condition:
    - condition: state
      entity_id: input_select.family_room_lamp_mode
      state: bindicator
    - condition: template
      value_template: >-
        {{ (states('sensor.days_to_black_bin_collection') | float(99)) < 2
           or (states('sensor.days_to_blue_bin_collection') | float(99)) < 2 }}
  action:
    - choose:
        - conditions:
            - condition: numeric_state
              entity_id: sensor.days_to_black_bin_collection
              below: 2  # i.e. Tomorrow or sooner
          sequence:
            - service: light.turn_on
              target:
                entity_id: light.family_room_lamp
              data:
                color_name: magenta
        - conditions:
            - condition: numeric_state
              entity_id: sensor.days_to_blue_bin_collection
              below: 2  # i.e. Tomorrow or sooner
          sequence:
            - service: light.turn_on
              target:
                entity_id: light.family_room_lamp
              data:
                color_name: blue
  mode: single
